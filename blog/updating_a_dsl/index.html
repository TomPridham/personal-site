<!DOCTYPE html><html lang="en-US"><head><meta charset="utf8"><meta lang="en-US"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Tom Pridham"><meta name="description" content="Portfolio site for Tom Pridham. I like being good at things."><title>tompridham.me</title><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/app.css"></head><body><nav class="space-between"><a id="home" href="/"><span>tompridham.me</span></a><div><input type="checkbox" id="hamburger-toggle"><label for="hamburger-toggle" class="sr-only">toggle nav menu</label><span class="hamburger"></span><span class="hamburger"></span><span class="hamburger"></span><ul id="menu"><li><a id="cv" href="/cv">CV</a></li><li><a id="about" href="/about">About</a></li><li><a id="blog" href="/blog">Blog</a></li><li><a id="projects" href="/projects">Projects</a></li><li><a href="https://github.com/tompridham">Github</a></li></ul></div></nav><div id="container"><h1>Updating a DSL for Consistency and Testability</h1><p>When I was working at Osmos, we had a Microsoft Excel like DSL that would allow users to apply functions to their data. The language had sort of grown organically over time and was largely untested. Because problems were addressed as they were brought up by customers, there were a number of inconsistencies in how different functions behaved and how type coercion worked. I undertook the large task of resolving some of those inconsistencies and adding a large number of test cases.</p><p>This started out as just writing test cases for the existing behavior, since the majority of it was undocumented and there was uncertainty about current behavior vs desired behavior. As I was writing tests, I was also documenting the current behavior, providing an assessment of the intuitiveness and potential solutions for cases that were surprising. The main thing we wanted to reconcile were certain 'gotchas' for our users, where they were expecting the language to behave one way and were surprised when it acted a different way. Once I was done adding tests and documenting, I provided the document to our product and customer service people so they could review and provide feedback.</p><p>We went through a couple iterations of feedback and implementing suggestions. The tests came in handy again because the feedback often would seem good in natural language, but would have unforeseen consequences that the test cases exposed. It was really nice to easily be able to show the effects of the changes with simple test diffs. Once we arrived at something everyone was happy with, we could begin the process of rolling it out.</p><p>Because these changes mostly affected edge cases and often ended with customers contacting us about workarounds, we were pretty confident that the changes we had made wouldn't affect any of our existing customers. We did manually check a pretty big chunk of formulas currently in use to be extra sure it wouldn't have any unexpected effects. Once we had done that, we rolled out the feature and our CS team messaged our customers about the changes.</p><p>This set of changes helped reduce the amount of times our CS team had to interface with confused customers about our DSL. It also greatly increased the amount of tested code in the DSL, documented previously undocumented behaviors and made that portion of the DSL more idiomatic and consistent.</p></div><script type="text/javascript">
    const active = document
      .querySelector('.active-header');
    if(active){
      active.classList.remove('active-header');
    }
    document
      .getElementById('blog/updating_a_dsl'.split('/')[0])
      .classList
      .add('active-header')
</script></body></html>